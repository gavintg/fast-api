#!/usr/bin/env bash

mkdir -p $PWD/db
chmod 777 $PWD/db

# cat << EOF > $PWD/db/install_db.sql
# CREATE DATABASE IF NOT EXISTS fastapi;
# USE fastapi;
# CREATE TABLE users (
#      id MEDIUMINT NOT NULL AUTO_INCREMENT,
#      username VARCHAR(1024) NOT NULL,
#      password VARCHAR(1024) NOT NULL,
#      PRIMARY KEY (id)
# );
# EOF

docker compose up

cat << EOF > $PWD/.env
MYSQL_USERNAME=root
MYSQL_PASSWORD=password
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=fastapi
EOF